import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/dist/ScrollTrigger";
import React from "react";
import styles from "../../../styles/Work.module.css";
import Button from "../../Button";
import SkewedParallax from "../../Parallax/SkewedParallax";

function Work() {
  const ref = React.useRef(null);

  gsap.registerPlugin(ScrollTrigger);

  React.useEffect(() => {
    const heading = ref.current;
    gsap.set(heading, { transformOrigin: "50% 100%", scaleY: 0 });
    gsap.to(heading, {
      ease: "none",
      startAt: { scaleY: 0 },
      scaleY: 1,
      scrollTrigger: {
        trigger: heading,
        start: "top bottom",
        //ends when element is not in view
        end: "center center",
        scrub: true,
        fastScrollEnd: true,
      },
    });

    const refresh = () => {
      ScrollTrigger.clearScrollMemory();
      window.history.scrollRestoration = "manual";
      ScrollTrigger.refresh(true);
    };

    refresh();

    window.addEventListener("resize", refresh);
  }, []);

  return (
    <div className={styles.container}>
      <div className={styles.headingText} ref={ref}>
        <svg
          preserveAspectRatio="none"
          width="100%"
          height="100%"
          viewBox="0 0 6201.002 964"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g
            id="svgGroup"
            stroke-linecap="round"
            fill-rule="evenodd"
            font-size="9pt"
            stroke="#000"
            stroke-width="0.25mm"
            fill="#000"
          >
            <path
              d="M 6148 197 L 6131 205 Q 6041 95 5854 95 Q 5772 98 5705 130 A 267.961 267.961 0 0 0 5665.834 152.603 Q 5646.847 166.037 5634.683 181.103 A 91.692 91.692 0 0 0 5613 240 A 57.903 57.903 0 0 0 5622.364 267.347 Q 5632.744 283.803 5654.5 299.5 Q 5684.347 321.035 5731.608 334.291 A 438.409 438.409 0 0 0 5764 342 Q 5810 352 5865 360 Q 5912 367 5959 376 Q 6006 385 6049.5 398.5 Q 6093 412 6127 433.5 A 177.061 177.061 0 0 1 6167.891 468.678 A 161.601 161.601 0 0 1 6181 486.5 Q 6201 518 6201 563 Q 6198 639 6152 685.5 A 269.316 269.316 0 0 1 6094.094 729.403 Q 6064.563 746.344 6028 759 A 490.957 490.957 0 0 1 5914.577 783.23 A 604.714 604.714 0 0 1 5856 786 A 551.409 551.409 0 0 1 5730.267 772.542 Q 5638.77 751.12 5574.551 695.602 A 336.24 336.24 0 0 1 5540 661 Q 5540 659 5562 648 A 322.846 322.846 0 0 0 5750.687 759.806 A 495.257 495.257 0 0 0 5854 770 Q 5930 770 5996.5 743 A 281.006 281.006 0 0 0 6041.175 720.351 Q 6074.564 699.213 6094 671 A 144.856 144.856 0 0 0 6103.875 653.163 Q 6108.318 643.478 6110.332 634.468 A 66.273 66.273 0 0 0 6112 620 A 65.59 65.59 0 0 0 6098.664 581.686 Q 6082.053 558.279 6044.75 536.01 A 386.806 386.806 0 0 0 6021 523 A 387.322 387.322 0 0 0 5978.451 508.542 Q 5915.502 490.693 5811 477 Q 5768.891 471.641 5735.574 465.695 A 958.894 958.894 0 0 1 5716 462 A 284.787 284.787 0 0 1 5652.42 441.652 A 244.984 244.984 0 0 1 5619 423 A 261.27 261.27 0 0 1 5573.994 386.802 Q 5547.763 359.95 5536.492 328.988 A 142.086 142.086 0 0 1 5528 280 A 135.081 135.081 0 0 1 5553.792 201.057 A 187.933 187.933 0 0 1 5572 179 Q 5615.694 133.32 5688.972 106.377 A 439.833 439.833 0 0 1 5690 106 A 446.069 446.069 0 0 1 5777.517 84.245 A 604.349 604.349 0 0 1 5860 78 Q 5945 78 6023.5 106 Q 6102 134 6148 197 Z M 3349 436 L 3349 759 L 3814 759 L 3814 772 L 3214 772 L 3214 87 L 3814 87 L 3814 100 L 3349 100 L 3349 423 L 3740 423 L 3740 436 L 3349 436 Z M 1510 773 L 1155 436 L 995 436 L 997 773 L 861 773 L 861 81 L 1275 81 A 762.881 762.881 0 0 1 1351.54 85.209 Q 1389.047 89.307 1420.434 97.365 A 317.113 317.113 0 0 1 1474 116 Q 1534.27 144.234 1561.815 182.198 A 117.799 117.799 0 0 1 1585 253 Q 1585 279 1566 318.5 A 100.6 100.6 0 0 1 1547.61 344.153 Q 1527.216 365.446 1490.154 385.981 A 458.286 458.286 0 0 1 1473 395 A 338.593 338.593 0 0 1 1414.081 417.039 Q 1384.382 425.296 1349.588 430.248 A 695.638 695.638 0 0 1 1306 435 L 1653 773 L 1510 773 Z M 4645 190 L 4627 198 Q 4593.469 156.579 4532.705 130.72 A 351.225 351.225 0 0 0 4531 130 Q 4457 98 4376 98 Q 4301 98 4233.5 125.5 A 278.968 278.968 0 0 0 4133.367 193.531 A 273.46 273.46 0 0 0 4122 206.5 A 379.911 379.911 0 0 0 4062.992 304.361 A 355.759 355.759 0 0 0 4056.5 321.5 Q 4035 383 4035 437 A 312.943 312.943 0 0 0 4130.367 664.386 A 404.985 404.985 0 0 0 4135 669 A 392.066 392.066 0 0 0 4253.939 743.26 A 353.395 353.395 0 0 0 4383 767 Q 4447 767 4512 744 A 484.807 484.807 0 0 0 4589.125 709.196 A 411.202 411.202 0 0 0 4627 685 L 4642 695 A 432.023 432.023 0 0 1 4470.87 772.962 Q 4408.047 787 4335 787 Q 4240 787 4157 759.5 A 509.107 509.107 0 0 1 4056.891 714.362 A 441.653 441.653 0 0 1 4011.5 683.5 A 376.201 376.201 0 0 1 3933.268 602.222 A 345.584 345.584 0 0 1 3913.5 570.5 Q 3878 506 3878 433 Q 3878 359 3913.5 295 A 365.949 365.949 0 0 1 3992.628 197.679 A 428.273 428.273 0 0 1 4011.5 182 Q 4074 133 4157 105.5 A 550.495 550.495 0 0 1 4304.151 78.74 A 636.799 636.799 0 0 1 4335 78 Q 4453 79 4534 112.5 A 420.807 420.807 0 0 1 4577.599 133.316 Q 4621.464 157.705 4642.705 186.751 A 120.583 120.583 0 0 1 4645 190 Z M 5514 102 L 5173 102 L 5173 773 L 5038 773 L 5038 102 L 4708 102 L 4708 88 L 5514 88 L 5514 102 Z M 133 391 L 135 761 L 0 761 L 0 0 L 410 0 A 733.243 733.243 0 0 1 481.613 3.886 Q 549.641 11.172 596 32 Q 714 85 714 191 A 90.755 90.755 0 0 1 713.833 195.942 Q 713.234 206.563 710.5 230 A 88.088 88.088 0 0 1 705.027 251.141 Q 697.417 271.02 679.972 295.401 A 360.544 360.544 0 0 1 674 303.5 A 210.429 210.429 0 0 1 591.293 368.542 A 247.374 247.374 0 0 1 588 370 A 225.849 225.849 0 0 1 550.558 380.972 Q 507.484 390 445 390 L 411 391 L 133 391 Z M 2167 784 Q 2022 782 1921.5 729 A 455.385 455.385 0 0 1 1837.828 672.94 A 356.131 356.131 0 0 1 1768.5 594 A 357.872 357.872 0 0 1 1732.153 520.969 A 270.288 270.288 0 0 1 1716 430 A 286.219 286.219 0 0 1 1743.38 309.362 A 371.1 371.1 0 0 1 1769 263 A 356.99 356.99 0 0 1 1859.88 168.295 A 471.868 471.868 0 0 1 1924.5 129 Q 2017.391 81.875 2147.65 75.814 A 829.752 829.752 0 0 1 2175 75 A 572.157 572.157 0 0 1 2270.119 83.477 A 431.271 431.271 0 0 1 2359 109 Q 2439 142 2493.5 195 A 403.95 403.95 0 0 1 2550.081 262.936 A 343.813 343.813 0 0 1 2576 310 Q 2604 372 2604 430 Q 2604 489 2575.5 551 A 349.507 349.507 0 0 1 2520.325 635.217 A 426.248 426.248 0 0 1 2491 665.5 A 405.527 405.527 0 0 1 2403.095 727.628 A 504.277 504.277 0 0 1 2353.5 750.5 A 459.72 459.72 0 0 1 2249.924 777.771 A 608.385 608.385 0 0 1 2167 784 Z M 2674 964 L 2663 949 Q 2775 866 2775 707 L 2775 86 L 2910 86 L 2910 684 A 332.504 332.504 0 0 1 2904.582 741.19 Q 2898.528 773.309 2885.754 799.65 A 195.146 195.146 0 0 1 2879.5 811.5 A 259.066 259.066 0 0 1 2804.769 893.429 A 302.312 302.312 0 0 1 2797.5 898.5 A 629.064 629.064 0 0 1 2736.498 934.667 A 844.682 844.682 0 0 1 2674 964 Z M 2170 773 A 291.315 291.315 0 0 0 2225.33 767.988 A 217.843 217.843 0 0 0 2280 750 Q 2327 727 2360 689 Q 2393 651 2413.5 605.5 Q 2434 560 2443.5 513.5 Q 2453 467 2453 428 Q 2453 313 2392 211 Q 2319 87 2174 86 A 336.345 336.345 0 0 0 2070.359 103.169 A 261.811 261.811 0 0 0 1934 211 Q 1868 312 1868 429 A 292.996 292.996 0 0 0 1873.17 481.982 Q 1880.031 519.227 1896 562 A 374.259 374.259 0 0 0 1938.749 646.967 A 310.389 310.389 0 0 0 1991 706 Q 2065 773 2170 773 Z M 133 376 L 413 376 A 130.1 130.1 0 0 0 496.676 338.749 A 165.159 165.159 0 0 0 499 336.5 A 213.998 213.998 0 0 0 550.222 255.181 A 252.226 252.226 0 0 0 553 247 Q 565 210 565 173 A 184.342 184.342 0 0 0 564.719 163.406 Q 564.14 152.416 562.372 136.8 A 911.388 911.388 0 0 0 560.5 121.5 A 87.415 87.415 0 0 0 550.246 91.121 Q 543.921 79.453 533.915 67.672 A 206.044 206.044 0 0 0 518.5 51.5 A 118.354 118.354 0 0 0 473.824 25.51 Q 455.551 19.418 433.266 17.228 A 268.868 268.868 0 0 0 407 16 L 304 16 L 135 15 L 133 376 Z M 995 423 L 1278 423 Q 1328 420 1365 387 Q 1402 354 1419 305 Q 1432 272 1432 238 Q 1432 223 1427 191.5 A 76.057 76.057 0 0 0 1417.574 165.741 Q 1411.832 155.677 1402.857 145.513 A 193.595 193.595 0 0 0 1384.5 127.5 A 117.993 117.993 0 0 0 1344.93 105.427 Q 1314.48 95 1272 95 L 1168 96 L 997 95 L 995 423 Z"
              vector-effect="non-scaling-stroke"
            />
          </g>
        </svg>
        {/* <h2 ref={ref}>Projects</h2> */}
      </div>

      <div className={styles.projectsDisplay}>
        <SkewedParallax baseVelocity={2} lengthStart={-5} lengthEnd={-30}>
          <div className={styles.wrapper}>
            <h4>Project name</h4>
            <p>Description </p>
          </div>
          <div className={styles.wrapper}>
            <h4>Project name</h4>
            <p>Werk histry 2 </p>
          </div>
          <div className={styles.wrapper}>
            <h4>Project name</h4>
            <p>Werk histry 3</p>
          </div>
          <div className={styles.wrapper}>
            <h4>Project name</h4>
            <p>Werk histry</p>
          </div>
        </SkewedParallax>
      </div>
      <Button label="Github" />
    </div>
  );
}

export default Work;
